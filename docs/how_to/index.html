<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>How do I… | kubectl-ice</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="How do I…" />
<meta name="author" content="NimbleArchitect" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="kubectl-ice cleanly lists all containers in kubernetes pods including init containers you can view running kubernetes information about the multi-container pods to assist in troubleshooting and information gathering" />
<meta property="og:description" content="kubectl-ice cleanly lists all containers in kubernetes pods including init containers you can view running kubernetes information about the multi-container pods to assist in troubleshooting and information gathering" />
<link rel="canonical" href="https://nimblearchitect.github.io/kubectl-ice/how_to/" />
<meta property="og:url" content="https://nimblearchitect.github.io/kubectl-ice/how_to/" />
<meta property="og:site_name" content="kubectl-ice" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="How do I…" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"NimbleArchitect"},"description":"kubectl-ice cleanly lists all containers in kubernetes pods including init containers you can view running kubernetes information about the multi-container pods to assist in troubleshooting and information gathering","headline":"How do I…","url":"https://nimblearchitect.github.io/kubectl-ice/how_to/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/kubectl-ice/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://nimblearchitect.github.io/kubectl-ice/feed.xml" title="kubectl-ice" /><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q2EDCE0VN4"></script>
<script>
  window['ga-disable-G-Q2EDCE0VN4'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
  window.dataLayer = window.dataLayer || [];
  function gtag(){window.dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Q2EDCE0VN4');
</script><link rel="stylesheet" href="/kubectl-ice/mystyle.css">
<link rel="icon" type="image/x-icon" href="/kubectl-ice/assets/favicon.ico">
<!--[if IE]><link rel="shortcut icon" href="/kubectl-ice/assets/favicon.ico"/><![endif]-->
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/kubectl-ice/">
      <img src="/kubectl-ice/assets/ice_logo.svg" alt="download logo" height="32" width="32" style="padding-right: 0.2em;" /> 
      kubectl-ice</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/kubectl-ice/about/">About</a><a class="page-link" href="/kubectl-ice/demos/">Demos</a><a class="page-link" href="/kubectl-ice/downloads/">Downloads</a><a class="page-link" href="/kubectl-ice/how_to/">How do I...</a><a class="page-link" href="/kubectl-ice/documentation/">Documentation</a><a class="page-link" href="/kubectl-ice/faq/">FAQ</a><a class="page-link" href="/kubectl-ice/blog/">Ice Blog</a><a class="page-link" href="/kubectl-ice/donations/">Donations</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <h1>How do I...</h1>

<p>A list of useful commands list in a question and answer format, please let me know if you think of any others</p>
<ul>
  
    <li>
      <h3>How do you cleanly list all the containers in a kubernetes pod</h3>
      <p>
        <p>listing containers is a core part of kubectl-ice, here we use the –columns flag to specify the container names, we also specify the pod name to keep things clean by displaying only the details of the pod “mypod”</p>

<p><code class="language-plaintext highlighter-rouge">kubectl-ice image --columns container mypod</code></p>

      </p>
    </li>
  
    <li>
      <h3>How do I list all pods with a container named nginx</h3>
      <p>
        <p>listing container names normally involves the use of grep but as you can see with kubectl-ice we dont need it any more, this command will search all pods looking foar a container with the matching name (in our case nginx) and display only those matches, the -A tells ice to scan all pods in all avaliable namespaces</p>

<p><code class="language-plaintext highlighter-rouge">kubectl-ice status -Ac nginx</code></p>

      </p>
    </li>
  
    <li>
      <h3>How do I show the images used in a helm chart</h3>
      <p>
        <p>lets say you want to list all the images used in a deployed helm chart, now you could use some fancy command line tools to search the installed manifest, which would work but why go through all that effort when you can use ice to read from stdin and process it directly. This command reads the pre deployed helm manifest the output of this is piped to ice which reads the yaml and pull out the image list, just as it would if it was reading from the kubernetes api. You can also substitute “image” with other subcommands</p>

<p><code class="language-plaintext highlighter-rouge">helm get manifest mychart | kubectl-ice image</code></p>

<p>Dont forget to replace mychart above with the name of the installed chart</p>

      </p>
    </li>
  
    <li>
      <h3>How do I find out which container is crashing in a pod</h3>
      <p>
        <p>so you have a list of pods that are randomly restarting, not a big deal except these pods have multipule containers and you want to find out which container is causing the issue. This is where kubectl-ice status comes in to play it shows the pod restart counts along with the current status of the pods you can also narrow the list to a single container in each pod using the -c flag</p>

<p><code class="language-plaintext highlighter-rouge">kubectl-ice status mypod</code></p>

<p>Replace mypod above with the name of the pod you want to check</p>

      </p>
    </li>
  
    <li>
      <h3>How do you find the list of pods which are not in running state or are having issues</h3>
      <p>
        <p>Imagine your boss wants a list of all pods that are not in the Running state, now its easy with the –match flag, you could even go one step further and reduce the list to a specific container</p>

<p><code class="language-plaintext highlighter-rouge">kubectl-ice status -A --match state!=Running</code></p>

      </p>
    </li>
  
    <li>
      <h3>How do I list all containers in all pods with status</h3>
      <p>
        <p>listing the container status is a single command when using kubectl-ice, the -A flag allow to search every known namespace</p>

<p><code class="language-plaintext highlighter-rouge">kubectl-ice status -A</code></p>

      </p>
    </li>
  
    <li>
      <h3>How do I list all images on the latest tag</h3>
      <p>
        <p>if you want to list images with the latest tag, you can use the –match flag like below, you can also change this to specific versions or invert the match using != instead of ==</p>

<p><code class="language-plaintext highlighter-rouge">kubectl-ice image -A --match tag==latest</code></p>

      </p>
    </li>
  
    <li>
      <h3>How do I list all pods that don't have a CPU limit set</h3>
      <p>
        <p>the match flag also allows you to list pods and containers that dont have a cpu limit set using the –match flag</p>

<p><code class="language-plaintext highlighter-rouge">kubectl-ice cpu --match 'limit==0'</code></p>

      </p>
    </li>
  
</ul>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/kubectl-ice/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">kubectl-ice</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">NimbleArchitect</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/nimblearchitect"><svg class="svg-icon"><use xlink:href="/kubectl-ice/assets/minima-social-icons.svg#github"></use></svg> <span class="username">nimblearchitect</span></a></li><li><a href="https://www.twitter.com/nimblearchitect"><svg class="svg-icon"><use xlink:href="/kubectl-ice/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">nimblearchitect</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>kubectl-ice cleanly lists all containers in kubernetes pods including init containers you can view running kubernetes  information about the multi-container pods to assist in troubleshooting and information gathering</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
